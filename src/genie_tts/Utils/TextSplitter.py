import re
from typing import List, Set, Pattern


class TextSplitter:
    def __init__(self, max_len: int = 40, min_len: int = 5):
        """
        åˆå§‹åŒ–æ–‡æœ¬åˆ‡åˆ†å™¨ã€‚

        :param max_len: è½¯é™åˆ¶æœ€å¤§é•¿åº¦ (Effective Length)ã€‚è¶…è¿‡æ­¤é•¿åº¦é‡åˆ°åˆ†éš”ç¬¦æ—¶ä¼šåˆ‡åˆ†ã€‚
        :param min_len: ç¡¬é™åˆ¶æœ€å°é•¿åº¦ (Effective Length)ã€‚å°äºæ­¤é•¿åº¦é‡åˆ°ç»ˆæ­¢ç¬¦ä¹Ÿä¸ä¼šåˆ‡åˆ†ã€‚
        """
        self.max_len: int = max_len
        self.min_len: int = min_len

        # 1. å®šä¹‰åŸºç¡€å­—ç¬¦é›†åˆ
        # åªè¦æ ‡ç‚¹å—ä¸­åŒ…å«è¿™äº›å­—ç¬¦ï¼Œå°±è§†ä¸º Ending (ç»ˆæ­¢ç¬¦)
        self.end_chars: Set[str] = {
            'ã€‚', 'ï¼', 'ï¼Ÿ', 'â€¦',
            '!', '?', '.'
        }

        # 2. å®šä¹‰æ ‡ç‚¹ç¬¦å·å…¨é›† (ç”¨äºæ­£åˆ™åŒ¹é…å’Œé•¿åº¦è®¡ç®—è¿‡æ»¤)
        self.all_puncts_chars: Set[str] = self.end_chars | {
            'ï¼Œ', 'ã€', 'ï¼›', 'ï¼š', 'â€”â€”',
            ',', ';', ':',
            'â€œ', 'â€', 'â€˜', 'â€™', '"', "'",
        }

        # 3. ç¼–è¯‘æ­£åˆ™è¡¨è¾¾å¼
        # ä½¿ç”¨éæ•è·ç»„ (?:) é…åˆ + å·ï¼Œå®ç°è´ªå©ªåŒ¹é…è¿ç»­æ ‡ç‚¹
        # sort + escape ç¡®ä¿æ­£åˆ™å®‰å…¨ä¸”ä¼˜å…ˆåŒ¹é…é•¿æ ‡ç‚¹
        sorted_puncts: List[str] = sorted(list(self.all_puncts_chars), key=len, reverse=True)
        escaped_puncts: List[str] = [re.escape(p) for p in sorted_puncts]
        self.pattern: Pattern = re.compile(f"((?:{'|'.join(escaped_puncts)})+)")

    @staticmethod
    def get_char_width(char: str) -> int:
        """è®¡ç®—å•å­—ç¬¦å®½åº¦ï¼šASCIIç®—1ï¼Œå…¶ä»–ï¼ˆä¸­æ—¥éŸ©ï¼‰ç®—2"""
        return 1 if ord(char) < 128 else 2

    def get_effective_len(self, text: str) -> int:
        """
        è®¡ç®—å­—ç¬¦ä¸²çš„æœ‰æ•ˆé•¿åº¦ã€‚
        é€»è¾‘ï¼šè·³è¿‡æ ‡ç‚¹ç¬¦å·ï¼Œä»…è®¡ç®—å†…å®¹å­—ç¬¦ã€‚
        ä¾‹å¦‚ï¼š"ä½ å¥½......" -> æœ‰æ•ˆé•¿åº¦ä¸º 4 (ä½ å¥½)ï¼Œè€Œä¸æ˜¯ 10ã€‚
        """
        length = 0
        for char in text:
            # å¦‚æœæ˜¯æ ‡ç‚¹ç¬¦å·é›†åˆé‡Œçš„å­—ç¬¦ï¼Œä¸è®¡å…¥é•¿åº¦
            if char in self.all_puncts_chars:
                continue
            length += self.get_char_width(char)
        return length

    def is_terminator_block(self, block: str) -> bool:
        """
        åˆ¤æ–­ä¸€ä¸ªæ ‡ç‚¹å—æ˜¯å¦èµ·åˆ°ç»“æŸå¥å­çš„ä½œç”¨ã€‚
        åªè¦å—ä¸­åŒ…å«ä»»æ„ä¸€ä¸ªç»“æŸå­—ç¬¦ï¼ˆå¦‚å¥å·ï¼‰ï¼Œåˆ™è§†ä¸ºç»“æŸå—ã€‚
        """
        for char in block:
            if char in self.end_chars:
                return True
        return False

    def split(self, text: str) -> List[str]:
        """æ ¸å¿ƒåˆ‡åˆ†é€»è¾‘"""
        if not text:
            return []

        text = text.replace('\n', '')

        # æ­£åˆ™åˆ‡åˆ†ï¼Œsegments æ ¼å¼å¦‚: ['ä½ å¥½', '......', 'æˆ‘æ˜¯è°', 'ï¼Ÿï¼', '']
        segments: List[str] = self.pattern.split(text)

        sentences: List[str] = []
        current_buffer: str = ""

        for segment in segments:
            if not segment:
                continue

            # åˆ¤æ–­å½“å‰ç‰‡æ®µæ˜¯å¦æ˜¯æ ‡ç‚¹å—ï¼ˆé€šè¿‡é¦–å­—ç¬¦åˆ¤æ–­å³å¯ï¼Œæ­£åˆ™ä¿è¯äº†ä¸€è‡´æ€§ï¼‰
            is_punct_block = segment[0] in self.all_puncts_chars

            if is_punct_block:
                current_buffer += segment

                # è®¡ç®—ç¼“å†²åŒºå†…å®¹çš„ã€æœ‰æ•ˆé•¿åº¦ã€‘
                eff_len = self.get_effective_len(current_buffer)

                # åˆ¤æ–­é€»è¾‘
                if self.is_terminator_block(segment):
                    # Case B: ç»“æŸç¬¦å· -> æ£€æŸ¥ min_len
                    if eff_len >= self.min_len:
                        sentences.append(current_buffer.strip())
                        current_buffer = ""
                    # else: æœ‰æ•ˆé•¿åº¦å¤ªçŸ­ï¼Œåˆå¹¶åˆ°ä¸‹ä¸€å¥
                else:
                    # Case A-B: åˆ†éš”ç¬¦å· -> æ£€æŸ¥ max_len
                    if eff_len >= self.max_len:
                        sentences.append(current_buffer.strip())
                        current_buffer = ""
                    # else: æ²¡åˆ°æœ€å¤§é•¿åº¦ï¼Œç»§ç»­ç´¯ç§¯
            else:
                # çº¯æ–‡æœ¬
                current_buffer += segment

        # å¤„ç†æ®‹ç•™ç¼“å†²åŒº
        if current_buffer:
            self._flush_buffer(sentences, current_buffer)

        return sentences

    def _flush_buffer(self, sentences: List[str], buffer: str):
        candidate = buffer.strip()
        if not candidate:
            return
        eff_len = self.get_effective_len(candidate)
        if eff_len > 0:
            sentences.append(candidate)
        elif sentences:
            sentences[-1] += candidate


TEXT = """
è¿™ä½ä¸­å›½ç™¾èŠ±å¥–å½±åï¼Œæ›¾è·2007é‡‘é©¬å¥³é…è§’å¥–ï¼ŒäºŒåº¦é—®é¼é‡‘é©¬å½±åï¼Œå¦‚ä»Šç»ˆäºæ‹¿ä¸‹åäººå½±å›çš„å¤§å¥–ã€‚æ ¹æ®å°åª’ä¸­å¤®ç¤¾æŠ¥å¯¼ï¼Œè¯„å®¡è®¤ä¸ºèŒƒå†°å†°åœ¨ç”µå½±ã€Šåœ°æ¯ã€‹é¥°æ¼”å†œå¦‡è§’è‰²åŒ–èº«å·«å¸ˆâ€œå†æ¬¡é¢ è¦†è¤å¹•å½¢è±¡ï¼Œ
å±•ç°ä»¥æŸ”å…‹åˆšç‰¹è´¨ï¼Œæå…·ç©¿é€åŠ›çš„æ¼”å‡ºè·å¾—è¯„å®¡è‚¯å®šã€‚â€
äº‹å®ä¸Šï¼ŒèŒƒå†°å†°æœ‰æ²¡æœ‰å‡ºå¸­ä¸€ç›´æ˜¯æ­¤å±Šé‡‘é©¬æœ€å¤§ç„¦ç‚¹ä¹‹ä¸€ã€‚åœ¨é¢å¥–å‰å‡ å°æ—¶ï¼Œå¯¼æ¼”å¼ å‰å®‰ç¡®è®¤èŒƒå†°å†°ä¸ä¼šæ¥å°ã€‚ä»–ä»£æ›¿èŒƒå†°å†°ä¸Šå°é¢†å¥–ï¼Œåˆ™ç«‹å³æ‹¨ç”µè¯ç»™èŒƒå†°å†°ï¼Œ
åœ¨ç”µè¯ä¸­ï¼ŒèŒƒå†°å†°æƒ…ç»ªæ¿€åŠ¨ï¼Œæ•°åº¦å“½å’½çš„è¯´ï¼Œé€éœ²è‡ªå·±ä¸€ç›´åœ¨æ‹æˆä¹Ÿä¸€ç›´çœ‹ç€ç›´æ’­ï¼Œå¥¹è¡¨ç¤ºâ€œæ„Ÿè°¢é‡‘é©¬ç»™æˆ‘çš„è‚¯å®šâ€ä¹Ÿè‚¯å®šå¯¼æ¼”å¼ å‰å®‰ã€‚
â€œé¦–å…ˆæ„Ÿè°¢é‡‘é©¬å¥–çš„ä¸»å§”ä¼šï¼Œç»™æˆ‘è¿™ä¸ªè‚¯å®šã€‚çœŸçš„æ·±æ·±çš„æ„Ÿè°¢å¼ å‰å®‰å¯¼æ¼”ï¼Œä¸€ç›´ä»¥æ¥åšå®šä¸ç§»å¯¹æˆ‘çš„ä¿¡ä»»ã€‚å›æƒ³èµ·å½“åˆï¼Œå¯¼æ¼”è·Ÿæˆ‘è®¨è®ºè§’è‰²çš„æ—¶å€™ï¼Œä»–è¯´ï¼šâ€˜å¦³æ„¿ä¸æ„¿æ„è®©æˆ‘æ‘§æ¯ä½ çš„è„¸ï¼Ÿâ€™ï¼Œ
æˆ‘è®°å¾—æˆ‘å½“æ—¶æ¯«ä¸çŠ¹è±«åœ°å›ç­”åœ°è¯´ï¼šâ€˜èŒƒå†°å†°å¥‰é™ªåˆ°åº•ï¼â€™å…¶å®è¿™ä¸ä»…æ˜¯å¯¹è§’è‰²çš„æ‰¿è¯ºï¼Œä¹Ÿæ˜¯ä¸€åœºä¹‰æ— åé¡¾åœ°ç›¸ä¿¡ã€‚â€
ä»ä¸­å›½ç”µè§†å‰§æ¼”éœ¸æ°”çš„æ­¦åˆ™å¤©åˆ°å¤§é©¬å†œæ‘çš„å¯¡å¦‡å¥³å·«ï¼Œå‡ºé“20å¤šå¹´çš„èŒƒå†°å†°åœ¨å¾—å¥–æ„Ÿè¨€ç§°ï¼Œé¥°æ¼”å†œå¦‡å¥³å·«è§’è‰²ï¼Œä¸åªæ˜¯å¤–è²Œçš„æŒ‘æˆ˜ã€ä¹Ÿæ˜¯å¥¹ä¸è§’è‰²çš„ä¸€æ¬¡â€œæ·±åº¦å¯¹è¯â€ã€‚
å¥¹åˆç§°â€œæœŸå¾…æˆ‘æœªæ¥èƒ½æœ‰æ›´å¤šçªç ´ï¼Œç”¨ä½œå“ä¼ é€’æ›´å¤šä»·å€¼ï¼Œèƒ½è¢«çœ‹åˆ°æ›´æ·±åº¦çš„æ„ä¹‰â€ã€‚å¥¹åˆè¯´ï¼Œæ„Ÿè°¢ã€Šåœ°æ¯ã€‹å‰§ç»„çš„æ‰€æœ‰äººï¼Œâ€œæ²¡æœ‰ä½ ä»¬å°±æ²¡æœ‰ã€Šåœ°æ¯ã€‹ï¼Œä¹Ÿæ²¡æœ‰å‡¤éŸ³è¿™ä¸ªè§’è‰²ã€‚â€
"""

if __name__ == "__main__":
    # åˆå§‹åŒ–åˆ‡åˆ†å™¨
    splitter = TextSplitter()

    # å®šä¹‰æµ‹è¯•ç”¨ä¾‹åˆ—è¡¨
    test_cases = [
        # ============ ä¸­æ–‡æµ‹è¯•æ ·ä¾‹ (15ä¸ª) ============
        {
            "desc": "ä¸­æ–‡æ ‡å‡†æµ‹è¯• (é•¿å¥)",
            "text": TEXT,
        },
        {
            "desc": "ä¸­æ–‡æ ‡å‡†æµ‹è¯• (é•¿å¥ä¸é€—å·åˆ‡åˆ†)",
            "text": "ä½ å¥½ï¼è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•æ–‡æœ¬ã€‚è™½ç„¶è¿™ä¸ªå¥å­å¾ˆçŸ­ï¼Œä½†æ˜¯ä¸‹ä¸€å¥ä¼šå¾ˆé•¿ï¼Œç›®çš„æ˜¯ä¸ºäº†æµ‹è¯•åœ¨é‡åˆ°é€—å·çš„æ—¶å€™ï¼Œå¦‚æœå¥å­é•¿åº¦è¶…è¿‡äº†æˆ‘ä»¬è®¾å®šçš„é˜ˆå€¼ï¼Œåˆ‡åˆ†å™¨æ˜¯å¦èƒ½å¤Ÿæ­£ç¡®åœ°å°†å…¶åˆ‡æ–­ï¼Ÿåº”è¯¥æ²¡é—®é¢˜ã€‚"
        },
        {
            "desc": "ä¸­æ–‡å¯¹è¯åœºæ™¯ (å¤šé—®ç­”)",
            "text": "å–‚ï¼Ÿä½ åœ¨å“ªé‡Œï¼Ÿæˆ‘åœ¨å…¬å¸å‘¢ã€‚å“¦ï¼Œé‚£ä½ ä»€ä¹ˆæ—¶å€™å›æ¥ï¼Ÿå¤§æ¦‚æ™šä¸Šä¸ƒç‚¹å§ï¼Œæ€ä¹ˆäº†ï¼Ÿæ²¡äº‹ï¼Œå°±æ˜¯æƒ³é—®é—®ä½ æ™šé¥­æƒ³åƒä»€ä¹ˆã€‚"
        },
        {
            "desc": "ä¸­æ–‡ä¹¦é¢è¯­ (åˆ†å·é¡¿å·)",
            "text": "ä¸­å›½æœ‰äº”åå…­ä¸ªæ°‘æ—ï¼ŒåŒ…æ‹¬æ±‰æ—ã€æ»¡æ—ã€å›æ—ã€è—æ—ã€è’™å¤æ—ç­‰ï¼›æ¯ä¸ªæ°‘æ—éƒ½æœ‰è‡ªå·±ç‹¬ç‰¹çš„æ–‡åŒ–ä¼ ç»Ÿã€è¯­è¨€æ–‡å­—ã€é£ä¿—ä¹ æƒ¯ä»¥åŠèŠ‚æ—¥åº†å…¸ã€‚"
        },
        {
            "desc": "ä¸­æ–‡è¯—æ­Œæœ—è¯µ (çŸ­å¥å¯†é›†)",
            "text": "åºŠå‰æ˜æœˆå…‰ï¼Œç–‘æ˜¯åœ°ä¸Šéœœã€‚ä¸¾å¤´æœ›æ˜æœˆï¼Œä½å¤´æ€æ•…ä¹¡ã€‚"
        },
        {
            "desc": "ä¸­æ–‡æ–°é—»æ’­æŠ¥ (é•¿å¥å¸¦ç ´æŠ˜å·)",
            "text": "æ®æ–°åç¤¾åŒ—äº¬ä»Šæ—¥æŠ¥é“â€”â€”æˆ‘å›½ç§‘ç ”å›¢é˜Ÿåœ¨é‡å­è®¡ç®—é¢†åŸŸå–å¾—é‡å¤§çªç ´ï¼ŒæˆåŠŸç ”åˆ¶å‡ºå…·æœ‰å®Œå…¨è‡ªä¸»çŸ¥è¯†äº§æƒçš„è¶…å¯¼é‡å­è®¡ç®—æœºåŸå‹æœºï¼Œè¿™æ ‡å¿—ç€æˆ‘å›½åœ¨è¯¥é¢†åŸŸå·²ç»è¿›å…¥å›½é™…ç¬¬ä¸€æ¢¯é˜Ÿã€‚"
        },
        {
            "desc": "ä¸­æ–‡çœç•¥å·å¯†é›†",
            "text": "æˆ‘......æˆ‘ä¸çŸ¥é“è¯¥è¯´ä»€ä¹ˆ......è¿™ä»¶äº‹......å¤ªçªç„¶äº†......è®©æˆ‘æƒ³æƒ³......"
        },
        {
            "desc": "ä¸­æ–‡æ„Ÿå¹è¯ç»„åˆ",
            "text": "å“å‘€ï¼ï¼ï¼ä½ æ€ä¹ˆèƒ½è¿™æ ·å‘¢ï¼Ÿï¼Ÿï¼ŸçœŸæ˜¯å¤ªè®©äººå¤±æœ›äº†ï¼ï¼æˆ‘ä¸æ•¢ç›¸ä¿¡ï¼"
        },
        {
            "desc": "ä¸­æ–‡è¶…çŸ­å¥æµ‹è¯• (æœ€å°é•¿åº¦è¾¹ç•Œ)",
            "text": "æ˜¯ã€‚å¯¹ã€‚å¥½ã€‚å—¯ï¼å•Šï¼Ÿå“¦ã€‚å˜¿ï¼å–‚ï¼Ÿå“ˆã€‚å‘€ï¼"
        },
        {
            "desc": "ä¸­æ–‡æ··åˆè‹±æ–‡æ•°å­—",
            "text": "æˆ‘çš„iPhone 15 Pro Maxæ‰‹æœºæ˜¨å¤©åˆšä¹°çš„ï¼ŒèŠ±äº†9999å…ƒã€‚ä½ è§‰å¾—è´µå—ï¼Ÿå…¶å®åœ¨Appleå®˜ç½‘ä¸Šä¹°è¿˜æœ‰ä¼˜æƒ ï¼Œå¯ä»¥çœ200-300å—é’±å‘¢ï¼"
        },
        {
            "desc": "ä¸­æ–‡æ— æ ‡ç‚¹é•¿æ–‡",
            "text": "è¿™æ˜¯ä¸€æ®µå®Œå…¨æ²¡æœ‰ä»»ä½•æ ‡ç‚¹ç¬¦å·çš„æ–‡æœ¬å®ƒåº”è¯¥ä¼šä¿æŒåŸæ ·å› ä¸ºæ²¡æœ‰è§¦å‘åˆ‡åˆ†çš„é”šç‚¹å³ä½¿å®ƒéå¸¸éå¸¸é•¿ä¹Ÿç¬¦åˆè®¾è®¡é¢„æœŸä½†æ˜¯å®é™…åº”ç”¨ä¸­å¾ˆå°‘ä¼šé‡åˆ°è¿™ç§æƒ…å†µ"
        },
        {
            "desc": "ä¸­æ–‡é¡¿å·åˆ—ä¸¾",
            "text": "ä»Šå¤©éœ€è¦ä¹°çš„ä¸œè¥¿æœ‰ï¼šè‹¹æœã€é¦™è•‰ã€æ©™å­ã€è‘¡è„ã€è¥¿ç“œã€è‰è“ã€è“è“ã€æ¨±æ¡ƒã€èŠ’æœã€çŒ•çŒ´æ¡ƒã€ç«é¾™æœã€è”æã€é¾™çœ¼ç­‰å„ç§æ°´æœã€‚"
        },
        {
            "desc": "ä¸­æ–‡å†’å·è¯´æ˜",
            "text": "æ³¨æ„ï¼šä»¥ä¸‹å†…å®¹éå¸¸é‡è¦ï¼Œè¯·ä»”ç»†é˜…è¯»ã€‚ç¬¬ä¸€ï¼šåŠ¡å¿…æŒ‰æ—¶åˆ°è¾¾ï¼›ç¬¬äºŒï¼šæºå¸¦ç›¸å…³è¯ä»¶ï¼›ç¬¬ä¸‰ï¼šæå‰åšå¥½å‡†å¤‡å·¥ä½œã€‚"
        },
        {
            "desc": "ä¸­æ–‡çº¯é€—å·é•¿å¥",
            "text": "ä»Šå¤©å¤©æ°”å¾ˆå¥½ï¼Œé˜³å…‰æ˜åªšï¼Œå¾®é£ä¹ ä¹ ï¼Œéå¸¸é€‚åˆå‡ºé—¨æ¸¸ç©ï¼Œå¯ä»¥å»å…¬å›­æ•£æ­¥ï¼Œä¹Ÿå¯ä»¥å»çˆ¬å±±é”»ç‚¼ï¼Œè¿˜å¯ä»¥çº¦ä¸Šä¸‰äº”å¥½å‹ä¸€èµ·é‡é¤ï¼Œæ€»ä¹‹æ˜¯ä¸ªéš¾å¾—çš„å¥½æ—¥å­ã€‚"
        },
        {
            "desc": "ä¸­æ–‡ç»“å°¾æ ‡ç‚¹ç¼ºå¤±",
            "text": "è¿™æ˜¯ç¬¬ä¸€å¥è¯ã€‚è¿™æ˜¯ç¬¬äºŒå¥è¯ã€‚è¿™æ˜¯ç¬¬ä¸‰å¥è¯ï¼Œä½†æ˜¯æœ€åæ²¡æœ‰æ ‡ç‚¹"
        },

        # ============ è‹±æ–‡æµ‹è¯•æ ·ä¾‹ (15ä¸ª) ============
        {
            "desc": "è‹±æ–‡æ ‡å‡†æµ‹è¯•",
            "text": "Hello, world! This is a simple test. However, this is a very long sentence that is designed to go on and on, exceeding the character limit we set, just to see if the splitter will break it at the comma, which it ideally should do."
        },
        {
            "desc": "è‹±æ–‡å¯¹è¯åœºæ™¯",
            "text": "Hey! How are you? I'm doing great, thanks for asking. What about you? Oh, I'm fine too. So, what are your plans for the weekend?"
        },
        {
            "desc": "è‹±æ–‡æ–°é—»æ’­æŠ¥",
            "text": "Breaking news from Washington â€” The President announced today that a new trade agreement has been reached with multiple countries, marking a significant milestone in international relations and economic cooperation."
        },
        {
            "desc": "è‹±æ–‡å­¦æœ¯å†™ä½œ",
            "text": "According to recent studies, the correlation between sleep quality and cognitive performance is statistically significant; moreover, researchers have found that individuals who maintain consistent sleep schedules demonstrate improved memory retention and problem-solving abilities."
        },
        {
            "desc": "è‹±æ–‡çœç•¥å·æ€è€ƒ",
            "text": "Well... I'm not sure about that... Maybe we should... you know... think about it more carefully... What do you think...?"
        },
        {
            "desc": "è‹±æ–‡è¶…çŸ­å¥",
            "text": "Yes. No. OK. Hi! Hey? Oh. Wow! What? Sure. Fine!"
        },
        {
            "desc": "è‹±æ–‡æ•°å­—æ··åˆ",
            "text": "The meeting is scheduled for 3:30 PM on December 25th, 2024. Please arrive 15-20 minutes early. The conference room is on the 5th floor, room number 512."
        },
        {
            "desc": "è‹±æ–‡å¼•å·åµŒå¥—",
            "text": "She said, \"He told me 'Don't worry about it,' but I'm still concerned.\" I didn't know how to respond!"
        },
        {
            "desc": "è‹±æ–‡åˆ—ä¸¾",
            "text": "We need to buy apples, bananas, oranges, grapes, watermelon, strawberries, blueberries, cherries, mangoes, kiwis, dragon fruit, and lychees from the grocery store."
        },
        {
            "desc": "è‹±æ–‡æ„Ÿå¹å¯†é›†",
            "text": "Oh my God!!! Are you serious?? I can't believe this!!! That's absolutely amazing!! Wow!!!"
        },
        {
            "desc": "è‹±æ–‡é—®å¥è¿ç»­",
            "text": "What's your name? Where are you from? How old are you? What do you do for a living? Do you have any hobbies? What's your favorite food?"
        },
        {
            "desc": "è‹±æ–‡ç ´æŠ˜å·è¡¥å……",
            "text": "The solution â€” which took years to develop â€” finally arrived yesterday. It was everything we hoped for â€” and more!"
        },
        {
            "desc": "è‹±æ–‡åˆ†å·å¤å¥",
            "text": "Some people love coffee; others prefer tea; still others enjoy both depending on the time of day and their mood."
        },
        {
            "desc": "è‹±æ–‡å†’å·è§£é‡Š",
            "text": "Remember: practice makes perfect. Here's what you need: dedication, patience, and consistent effort. That's the key: never give up."
        },
        {
            "desc": "è‹±æ–‡æ— æ ‡ç‚¹",
            "text": "This is a very long sentence without any punctuation marks at all and it should remain intact because there are no splitting anchors even though it goes on and on"
        },

        # ============ æ—¥è¯­æµ‹è¯•æ ·ä¾‹ (15ä¸ª) ============
        {
            "desc": "æ—¥è¯­æ ‡å‡†æµ‹è¯•",
            "text": "ã“ã‚“ã«ã¡ã¯ã€‚ã“ã‚Œã¯ãƒ†ã‚¹ãƒˆã§ã™ã€‚ã‚ã®ã†ã€ã‚‚ã—æ–‡ãŒé•·ã™ãã‚‹å ´åˆã€ä¾‹ãˆã°ã“ã®æ–‡ã®ã‚ˆã†ã«å¥èª­ç‚¹ã§åŒºåˆ‡ã‚‰ã‚Œã¦ã„ã‚‹é•·ã„æ–‡ç« ãŒã‚ã‚‹å ´åˆã€è‡ªå‹•çš„ã«åˆ†å‰²ã•ã‚Œã‚‹ã¹ãã§ã™ã€‚ã¯ã„ã€ãã†ã§ã™ã‹ï¼Ÿï¼"
        },
        {
            "desc": "æ—¥è¯­å¯¹è¯åœºæ™¯",
            "text": "ã‚‚ã—ã‚‚ã—ï¼Ÿä»Šã©ã“ã«ã„ã¾ã™ã‹ï¼Ÿä¼šç¤¾ã«ã„ã¾ã™ã€‚ãã†ã§ã™ã‹ã€‚ä½•æ™‚ã«å¸°ã‚Šã¾ã™ã‹ï¼Ÿå¤šåˆ†ä¸ƒæ™‚ã”ã‚ã§ã™ã€‚åˆ†ã‹ã‚Šã¾ã—ãŸï¼"
        },
        {
            "desc": "æ—¥è¯­æ•¬è¯­åœºæ™¯",
            "text": "ãŠä¸–è©±ã«ãªã£ã¦ãŠã‚Šã¾ã™ã€‚å…ˆæ—¥ã¯ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸã€‚ä»Šå¾Œã¨ã‚‚ã‚ˆã‚ã—ããŠé¡˜ã„ã„ãŸã—ã¾ã™ã€‚ãã‚Œã§ã¯ã€å¤±ç¤¼ã„ãŸã—ã¾ã™ã€‚"
        },
        {
            "desc": "æ—¥è¯­æ„Ÿå¹ç–‘é—®",
            "text": "ãˆã£ï¼æœ¬å½“ã§ã™ã‹ï¼Ÿï¼Ÿä¿¡ã˜ã‚‰ã‚Œãªã„ï¼ï¼ã™ã”ã„ï¼ï¼ã‚„ã£ãŸï¼ï¼å¬‰ã—ã„ï¼ï¼"
        },
        {
            "desc": "æ—¥è¯­çœç•¥å·",
            "text": "ãˆã£ã¨......ã©ã†ã—ã‚ˆã†......åˆ†ã‹ã‚‰ãªã„......å›°ã£ãŸ......ã‚‚ã†......æœ¬å½“ã«......"
        },
        {
            "desc": "æ—¥è¯­è¶…çŸ­å¥",
            "text": "ã¯ã„ã€‚ã„ã„ãˆã€‚ãˆãˆã€‚ã†ã‚“ã€‚ã‚ã£ã€‚ãã†ã€‚ã¸ãˆã€‚ã¾ã‚ã€‚ã­ãˆã€‚ãªã‚ã€‚"
        },
        {
            "desc": "æ—¥è¯­é•¿å¥è¯»ç‚¹",
            "text": "æ˜¨æ—¥ã€å‹é”ã¨ä¸€ç·’ã«æ–°ã—ãã‚ªãƒ¼ãƒ—ãƒ³ã—ãŸãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ã«è¡Œãã¾ã—ãŸãŒã€æ–™ç†ãŒã¨ã¦ã‚‚ç¾å‘³ã—ãã¦ã€é›°å›²æ°—ã‚‚è‰¯ãã¦ã€ã‚µãƒ¼ãƒ“ã‚¹ã‚‚ç´ æ™´ã‚‰ã—ãã¦ã€æœ¬å½“ã«æº€è¶³ã—ã¾ã—ãŸã€‚"
        },
        {
            "desc": "æ—¥è¯­å¼•ç”¨åµŒå¥—",
            "text": "å½¼ã¯ã€Œå½¼å¥³ãŒã€å¤§ä¸ˆå¤«ã ã‚ˆã€ã£ã¦è¨€ã£ã¦ãŸã€ã¨æ•™ãˆã¦ãã‚Œã¾ã—ãŸã€‚ã§ã‚‚ã€æœ¬å½“ã‹ãªï¼Ÿ"
        },
        {
            "desc": "æ—¥è¯­ç–‘é—®è¿ç»­",
            "text": "ãŠåå‰ã¯ï¼Ÿã”å‡ºèº«ã¯ï¼ŸãŠä»•äº‹ã¯ï¼Ÿè¶£å‘³ã¯ï¼Ÿå¥½ããªé£Ÿã¹ç‰©ã¯ï¼Ÿä½•æ­³ã§ã™ã‹ï¼Ÿ"
        },
        {
            "desc": "æ—¥è¯­åˆ—ä¸¾ä¸­ç‚¹",
            "text": "è²·ã„ç‰©ãƒªã‚¹ãƒˆã«ã¯ã€ã‚Šã‚“ã”ãƒ»ãƒãƒŠãƒŠãƒ»ã‚ªãƒ¬ãƒ³ã‚¸ãƒ»ã¶ã©ã†ãƒ»ã„ã¡ã”ãƒ»ãƒ¡ãƒ­ãƒ³ãƒ»ãƒ‘ã‚¤ãƒŠãƒƒãƒ—ãƒ«ãƒ»ãƒãƒ³ã‚´ãƒ¼ãªã©ãŒã‚ã‚Šã¾ã™ã€‚"
        },
        {
            "desc": "æ—¥è¯­æ–°é—»æ’­æŠ¥",
            "text": "æœ¬æ—¥ã®ãƒ‹ãƒ¥ãƒ¼ã‚¹ã§ã™â€”â€”æ”¿åºœã¯æ–°ã—ã„çµŒæ¸ˆæ”¿ç­–ã‚’ç™ºè¡¨ã—ã¾ã—ãŸã€‚ã“ã®æ”¿ç­–ã«ã‚ˆã‚Šã€ä¸­å°ä¼æ¥­ã¸ã®æ”¯æ´ãŒå¼·åŒ–ã•ã‚Œã€çµŒæ¸ˆæˆé•·ãŒæœŸå¾…ã•ã‚Œã¦ã„ã¾ã™ã€‚"
        },
        {
            "desc": "æ—¥è¯­ç‰‡å‡åæ··åˆ",
            "text": "ã“ã®ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã¯iPhone15ã§ã™ã€‚ã‚«ãƒ¡ãƒ©ã®æ€§èƒ½ãŒç´ æ™´ã‚‰ã—ã„ï¼ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã¯256GBã‚‚ã‚ã‚Šã¾ã™ã€‚ãƒãƒƒãƒ†ãƒªãƒ¼ã‚‚é•·æŒã¡ã—ã¾ã™ã€‚"
        },
        {
            "desc": "æ—¥è¯­æ¼¢å­—å¹³å‡åæ··åˆ",
            "text": "æ±äº¬éƒ½å†…ã®æ¡œãŒæº€é–‹ã«ãªã‚Šã¾ã—ãŸã€‚ä¸Šé‡å…¬åœ’ã‚„åƒé³¥ãƒ¶æ·µãªã©ã€æœ‰åãªèŠ±è¦‹ã‚¹ãƒãƒƒãƒˆã¯å¤šãã®è¦³å…‰å®¢ã§è³‘ã‚ã£ã¦ã„ã¾ã™ã€‚"
        },
        {
            "desc": "æ—¥è¯­æ— æ ‡ç‚¹",
            "text": "ã“ã‚Œã¯å¥èª­ç‚¹ãŒå…¨ããªã„é•·ã„æ–‡ç« ã§ã™ãŒãã®ã¾ã¾ä¿æŒã•ã‚Œã‚‹ã¯ãšã§ã™åˆ†å‰²ã®ãƒˆãƒªã‚¬ãƒ¼ãŒãªã„ã‹ã‚‰ã§ã™"
        },
        {
            "desc": "æ—¥è¯­ç»“å°¾æ ‡ç‚¹ç¼ºå¤±",
            "text": "ä»Šæ—¥ã¯è‰¯ã„å¤©æ°—ã§ã™ã€‚æ˜æ—¥ã‚‚æ™´ã‚Œã‚‹ã§ã—ã‚‡ã†ã€‚é€±æœ«ã¯é›¨ãŒé™ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“"
        },

        # ============ æ··åˆåœºæ™¯æµ‹è¯• (10ä¸ª) ============
        {
            "desc": "æ··åˆå¤šå­—ç¬¦æ ‡ç‚¹",
            "text": "ç­‰ä¸€ä¸‹......ä½ æ˜¯è°ï¼Ÿï¼è¿™æ˜¯ä¸€ä¸ªéå¸¸ç´§æ€¥çš„æƒ…å†µâ€”â€”è¯·ç«‹å³å›ç­”ï¼"
        },
        {
            "desc": "ä¸­è‹±æ—¥æ··åˆ",
            "text": "æˆ‘æ˜¨å¤©å»äº†Tokyo Towerï¼Œæ™¯è‰²beautifulï¼ã§ã‚‚ã€ãƒã‚±ãƒƒãƒˆãŒé«˜ã‹ã£ãŸ......"
        },
        {
            "desc": "ä»£ç ç‰‡æ®µæ··å…¥",
            "text": "åœ¨Pythonä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨print()å‡½æ•°è¾“å‡ºå†…å®¹ã€‚ä¾‹å¦‚ï¼šprint('Hello, World!')ï¼Œè¿™æ˜¯æœ€åŸºç¡€çš„è¯­æ³•ã€‚ä½ å­¦ä¼šäº†å—ï¼Ÿ"
        },
        {
            "desc": "URLå’Œé‚®ç®±",
            "text": "è¯·è®¿é—®æˆ‘ä»¬çš„ç½‘ç«™ï¼šwww.example.comï¼Œæˆ–è€…å‘é€é‚®ä»¶åˆ°info@example.comã€‚æˆ‘ä»¬ä¼šå°½å¿«å›å¤æ‚¨ï¼"
        },
        {
            "desc": "è¡¨æƒ…ç¬¦å·æ··åˆ",
            "text": "ä»Šå¤©å¿ƒæƒ…çœŸå¥½ğŸ˜Šï¼å¤©æ°”ä¹Ÿå¾ˆæ£’â˜€ï¸ã€‚è¦ä¸è¦ä¸€èµ·å‡ºå»ç©ğŸ‰ï¼Ÿæˆ‘è¯·å®¢ğŸ”ï¼"
        },
        {
            "desc": "å¤šè¯­è¨€æŠ¥ä»·",
            "text": "è¿™ä»¶å•†å“çš„ä»·æ ¼æ˜¯Â¥299ã€$45ã€â‚¬40ã€Â£35ï¼Œdepending on your regionã€‚ãŠè²·ã„å¾—ã§ã™ï¼"
        },
        {
            "desc": "ç‰¹æ®Šç¬¦å·å¯†é›†",
            "text": "è®¡ç®—å…¬å¼ä¸ºï¼š(a+b)Ã—cÃ·d=resultã€‚æ³¨æ„ï¼šaâ‰ 0ï¼Œb>0ï¼Œc<100ã€‚æ˜ç™½äº†å—ï¼Ÿï¼"
        },
        {
            "desc": "ç©ºç™½ç¬¦è¾¹ç•Œ",
            "text": "è¿™é‡Œæœ‰    å¾ˆå¤šç©ºæ ¼ã€‚    ä¸‹ä¸€å¥ä¹Ÿæ˜¯ã€‚     è¿˜æœ‰è¿™é‡Œ     ã€‚ä¼šæ­£ç¡®å¤„ç†å—ï¼Ÿ"
        },
        {
            "desc": "çº¯æ ‡ç‚¹ç¬¦å·",
            "text": "......ï¼ï¼ï¼ï¼Ÿï¼Ÿï¼Ÿ......"
        },
        {
            "desc": "æé•¿å•å¥æ— é€—å·",
            "text": "è¿™æ˜¯ä¸€ä¸ªéå¸¸éå¸¸éå¸¸éå¸¸éå¸¸éå¸¸éå¸¸éå¸¸éå¸¸éå¸¸éå¸¸éå¸¸éå¸¸éå¸¸éå¸¸éå¸¸éå¸¸é•¿çš„å¥å­ä½†æ˜¯å®Œå…¨æ²¡æœ‰ä»»ä½•é€—å·æˆ–è€…å…¶ä»–åˆ†éš”ç¬¦å·æ‰€ä»¥ç†è®ºä¸Šä¸åº”è¯¥è¢«åˆ‡åˆ†ã€‚"
        },

        # ============ è¾¹ç•Œå¼‚å¸¸æµ‹è¯• (5ä¸ª) ============
        {
            "desc": "ç©ºå­—ç¬¦ä¸²",
            "text": ""
        },
        {
            "desc": "ä»…ç©ºç™½ç¬¦",
            "text": "     \n\t\r   "
        },
        {
            "desc": "å•ä¸ªå­—ç¬¦",
            "text": "A"
        },
        {
            "desc": "å•ä¸ªæ ‡ç‚¹",
            "text": "ã€‚"
        },
        {
            "desc": "æ ‡ç‚¹å¼€å¤´",
            "text": "ã€‚ï¼ï¼Ÿè¿™æ˜¯ä¸€ä¸ªæ ‡ç‚¹å¼€å¤´çš„å¥å­ï¼Œå¾ˆä¸å¯»å¸¸ï¼å¯¹å§ï¼Ÿ"
        }
    ]

    print(f"åˆ‡åˆ†å™¨é…ç½®: MAX_LEN={splitter.max_len}, MIN_LEN={splitter.min_len}\n")

    # å¾ªç¯æ‰§è¡Œæµ‹è¯•
    for i, case in enumerate(test_cases, 1):
        print(f">>> Case {i}: {case['desc']}")
        print(f"åŸæ–‡: {case['text'][:60]}..." if len(case['text']) > 60 else f"åŸæ–‡: {case['text']}")

        results = splitter.split(case['text'])

        print("-" * 50)
        for j, sent in enumerate(results, 1):
            length = splitter.get_effective_len(sent)
            print(f"  {j:02d}. [len={length:02d}] {sent}")
        print("\n")
